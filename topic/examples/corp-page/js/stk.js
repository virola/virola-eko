!function(e){"use strict";function t(){var t=e.crypto||e.msCrypto;if(!a&&t&&t.getRandomValues)try{var o=new Uint8Array(16);u=a=function(){return t.getRandomValues(o),o},a()}catch(n){}if(!a){var i=new Array(16);c=a=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function o(){if("function"==typeof require)try{var e=require("crypto").randomBytes;d=a=e&&function(){return e(16)},a()}catch(t){}}function n(e,t,o){var n=t&&o||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[n+i++]=h[e])});16>i;)t[n+i++]=0;return t}function i(e,t){var o=t||0,n=l;return n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]}function r(e,t,o){var n=t&&o||0,r=t||[];e=e||{};var s=null!=e.clockseq?e.clockseq:v,a=null!=e.msecs?e.msecs:(new Date).getTime(),c=null!=e.nsecs?e.nsecs:b+1,d=a-y+(c-b)/1e4;if(0>d&&null==e.clockseq&&(s=s+1&16383),(0>d||a>y)&&null==e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=a,b=c,v=s,a+=122192928e5;var u=(1e4*(268435455&a)+c)%4294967296;r[n++]=u>>>24&255,r[n++]=u>>>16&255,r[n++]=u>>>8&255,r[n++]=255&u;var f=a/4294967296*1e4&268435455;r[n++]=f>>>8&255,r[n++]=255&f,r[n++]=f>>>24&15|16,r[n++]=f>>>16&255,r[n++]=s>>>8|128,r[n++]=255&s;for(var g=e.node||p,l=0;6>l;l++)r[n+l]=g[l];return t?t:i(r)}function s(e,t,o){var n=t&&o||0;"string"==typeof e&&(t="binary"===e?new g(16):null,e=null),e=e||{};var r=e.random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var s=0;16>s;s++)t[n+s]=r[s];return t||i(r)}var a,c,d,u,f;e?t():o();for(var g="function"==typeof Buffer?Buffer:Array,l=[],h={},w=0;256>w;w++)l[w]=(w+256).toString(16).substr(1),h[l[w]]=w;var m=a(),p=[1|m[0],m[1],m[2],m[3],m[4],m[5]],v=16383&(m[6]<<8|m[7]),y=0,b=0,x=s;x.v1=r,x.v4=s,x.parse=n,x.unparse=i,x.BufferClass=g,x._rng=a,x._mathRNG=c,x._nodeRNG=d,x._whatwgRNG=u,"undefined"!=typeof module&&module.exports?module.exports=x:"function"==typeof define&&define.amd?define(function(){return x}):(f=e.uuid,x.noConflict=function(){return e.uuid=f,x},e.honeyUuid=x)}("undefined"!=typeof window?window:null),function(e){"use strict";var t={},o="",n={},i="http://log.v2.hunantv.com/dispatcher.do";t.lastModify="2015-06-29 15:18:07",t.name="芒果TV数据上报";var r=window.top;if(r!=window)try{t.topurl=r.location.href}catch(s){r=window}t.log=function(e){if(null!=document.getElementById("STK_debug_console")){var o=document.getElementById("STK_debug_console");o.innerHTML+=e+" | "}else window.console&&window.console.log("["+t.log.debugid++ +"] "+e)},t.log.isDebug=-1,t.log.debugid=1,t.$={},t.E=function(){var e,t=Object.prototype.toString,o=Object.prototype.hasOwnProperty,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Object]":"object"},i=function(e){return null==e?String(e):n[t.call(e)]||"object"},r=function(e){return e&&"object"==typeof e&&"setInterval"in e},s=Array.isArray||function(e){return"array"===i(e)},a=function(e){if(!e||"object"!==i(e)||e.nodeType||r(e))return!1;if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(t in e);return void 0===t||o.call(e,t)},c=function(t,o,n){var i,r;for(i in n){var d=o[i],u=n[i];o!==u&&(t&&u&&(a(u)||(e=s(u)))?(e?(e=!1,r=d&&s(d)?d:[]):r=d&&a(d)?d:{},o[i]=c(t,r,u)):void 0!==u&&(o[i]=u))}return o};return{extend:c}}(),function(e){e.cookie={set:function(e,t,o,n,i){if(o){var r=new Date;1==o?(r.setDate(r.getDate()+1),r.setHours(0),r.setMinutes(0),r.setSeconds(0)):r.setTime(r.getTime()+864e5*o)}return document.cookie=e+"="+t+"; "+(o?"expires="+r.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),o=document.cookie.match(t);return o?o[1]:""},del:function(e,t,o){var n=new Date;n.setTime(n.getTime()-1),document.cookie=e+"=; expires="+n.toGMTString()+";"+(o?"path="+o+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}}}(t.$);!function(e){function o(o){var n=o.match(/MQQBrowser\/(\d+\.\d+)/i),i=(o.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i)||o.match(/V1_AND_SQ_([\d\.]+)/),o.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||o.match(/MicroMessenger\/((\d+)\.(\d+))/),o.match(/Mac\sOS\sX\s(\d+(\_|\.)\d+)/)),r=o.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),s=o.match(/MiuiBrowser\/(\d+\.\d+)/i),a=o.match(/MI-ONE/),c=o.match(/MI PAD/),d=o.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||o.match(/\sUC\s/),u=o.match(/IEMobile(\/|\s+)(\d+\.\d+)/)||o.match(/WPDesktop/),f=o.match(/(ipod).*\s([\d_]+)/i),g=o.match(/(iphone)\sos\s([\d_]+)/i),l=o.match(/Chrome\/(\d+\.\d+)/),h=o.match(/Mozilla.*Linux.*Android.*AppleWebKit.*Mobile Safari/),w=o.match(/(android)\s([\d\.]+)/i);o.indexOf("HTC")>-1;if(e.browser=e.browser||{},e.os=e.os||{},window.ActiveXObject){var m=6;(window.XMLHttpRequest||o.indexOf("MSIE 7.0")>-1)&&(m=7),(window.XDomainRequest||o.indexOf("Trident/4.0")>-1)&&(m=8),o.indexOf("Trident/5.0")>-1&&(m=9),o.indexOf("Trident/6.0")>-1&&(m=10),e.browser.ie=!0,e.browser.version=m}else o.indexOf("Trident/7.0")>-1&&(e.browser.ie=!0,e.browser.version=11);w&&(this.os.android=!0,this.os.version=w[2],this.os.sys=w[1]),f&&(this.os.ios=this.os.ipod=!0,this.os.version=f[2].replace(/_/g,"."),this.os.sys=f[1]),g&&(this.os.iphone=this.os.ios=!0,this.os.version=g[2].replace(/_/g,"."),this.os.sys=g[1]),r&&(this.os.windows=!0,this.os.version=r[2],this.os.windows=this.os.sys="window"),i&&(this.os.Mac=!0,this.os.version=i[1],this.os.Mac=this.os.sys="MAC"),o.indexOf("lepad_hls")>0&&(this.os.LePad=!0),c&&(this.os.MIPAD=!0),n&&(this.browser.MQQ=!0,this.browser.version=n[1]),s&&(this.browser.MIUI=!0,this.browser.version=s[1]),d&&(this.browser.UC=!0,this.browser.version=d[1]||NaN),u&&(this.browser.IEMobile=!0,this.browser.version=u[2]),h&&(this.browser.AndriodBrowser=!0),a&&(this.browser.M1=!0),l&&(this.browser.Chrome=!0,this.browser.version=l[1]),this.os.windows&&("undefined"!=typeof navigator.platform&&"win64"==navigator.platform.toLowerCase()?this.os.win64=!0:this.os.win64=!1);var p={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var v in p)this.os[v]=-1!==o.indexOf(p[v]);e.os.phone=e.os.phone||/windows phone/i.test(o),this.os.getNumVersion=function(){return parseFloat(e.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),t.E.extend(!0,e.browser,{getNumVersion:function(){return parseFloat(e.browser.version,"10")},uaMatch:function(){o=o.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(o)||[];return{browser:e[1]||"",version:e[2]||"0"}}})}o.call(e,navigator.userAgent),function(){var t=navigator.userAgent.toLowerCase(),o={isUc:/ucweb/.test(t),isChrome:-1!==navigator.userAgent.indexOf("Chrome"),isFirefox:/firefox/.test(t),isOpera:/opera/.test(t),isSafire:/safari/.test(t)&&!/chrome/.test(t),is360:/360se/.test(t),isBaidu:/bidubrowser/.test(t),isSougou:/metasr/.test(t),isIE6:/msie 6.0/.test(t),isIE7:/msie 7.0/.test(t),isIE8:/msie 8.0/.test(t),isIE9:/msie 9.0/.test(t),isIE10:/msie 10.0/.test(t),isIE11:/msie 11.0/.test(t),isLB:/lbbrowser/.test(t),isWX:/micromessenger/.test(t),isQQ:/qqbrowser/.test(t)};for(var n in o)o.hasOwnProperty(n)&&o[n]&&(e.browser.brName=n)}(),function(){var t=navigator.userAgent.toLowerCase(),o={isIpad:/ipad/.test(t),isIphone:/iphone os/.test(t),isAndroid:/android/.test(t),isWindowsCe:/windows ce/.test(t),isWindowsMobile:/windows mobile/.test(t),isWin2K:/windows nt 5.0/.test(t),isXP:/windows nt 5.1/.test(t),isVista:/windows nt 6.0/.test(t),isWin7:/windows nt 6.1/.test(t),isWin8:/windows nt 6.2/.test(t),isWin81:/windows nt 6.3/.test(t)};for(var n in o)o.hasOwnProperty(n)&&o[n]&&(e.os.sys=n)}()}(t.$),function(e){var r={getWindowWH:function(){return[window.screen.width,window.screen.height]},noop:function(){},isString:function(t){return"string"===e.type(t)},isUndefined:function(t){return"undefined"===e.type(t)},now:function(){return(new Date).getTime()},mouseCoords:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}},getHost:function(){var e=window.location.hostname||window.location.host,t=location.host.split(".");return t.length>1&&(e=t.slice(t.length-2).join(".")),e},createPar:function(e){var t="";for(var o in e)""!=t&&(t+="&"),t+=o+"="+encodeURIComponent(e[o]);return t},filterXSS:function(t){return e.isString(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):t},getJsonp:function(e,t){var o=function(e){var t=document.createElement("script");t.type="text/javascript",t.setAttribute("charset","utf-8"),t.readyState?t.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&(this.onreadystatechange=null,document.body.removeChild(this))}:t.onload=function(){document.body.removeChild(this)},t.setAttribute("src",e),document.body.appendChild(t)},n=function(e,t){var o,n=[];for(o in t)n.push(escape(t)+"="+escape(t[o]));return n.length>0?(-1==e?"?":"&")+n.join("&"):""};if("string"==typeof e)var i=e.indexOf("?");o(e+n(i,t))},createGUID:function(){t.$.getJsonp("http://guid.mgtv.com/pc/distribute.do?callback=STK.$.getGUID",{t:(new Date).getTime()})},getGUID:function(e){if(200==e.status){o=e.data,n.guid=o;var e=t.E.extend(!0,t.defaultConfig,n),r=t.$.createPar(e),s=new Image(1,1);s.src=i+"?"+r,t.$.cookie.set("__MQGUID",o,9e3,".mgtv.com")}else t.log("GUID加载失败")},getUA:function(){return navigator.userAgent.toLowerCase()},getTimer:function(e){var t=new Date,o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};if(/(y+)/.test(e)){e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length));for(var n in o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)))}return e},stkuuid:function(){var e=t.$.cookie.get("__STKUUID");return""==e&&(e=window.honeyUuid(),t.$.cookie.set("__STKUUID",e,9e3,".mgtv.com")),e},uuid:function(){return t.$.cookie.get("uuid")},sessionid:function(){var o=t.$.cookie.get("sessionid"),n=t.$.cookie.get("lastActionTime")||0,i=function(){o=e.now(),t.$.cookie.set("sessionid",o.toString(),1,".mgtv.com")};return""==o?i():e.now()-parseInt(n,10)>18e5&&i(),t.$.cookie.set("lastActionTime",e.now().toString(),1,".mgtv.com"),o.toString()},getsUUID:function(e,t){function t(e){var t=16*Math.random()|0,o="x"==e?t:3&t|8;return o.toString(16)}var o=/[xy]/g;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o,t).toUpperCase()},getPageCatogry:function(e){function t(e){var t=e.match(n);return null!=t&&t.length>0?t[1]:""}function o(){return a.indexOf("?")>0?void(d=a.substring(0,a.indexOf("?"))):a.indexOf("#")>0?void(d=a.substring(0,a.indexOf("#"))):void(d=a)}var n=/http:\/\/([^\/]+)/i,i={"www.mgtv.com":0,"so.mgtv.com":9,"list.mgtv.com":8,"live.mgtv.com":7,"i.mgtv.com":12},r={"^/$":0,"^/show/$":1,"^/movie/$":3,"^/tv/$":2,"^/cartoon/$":4,"^/child/$":5,"^/music/$":6,"^/live/$":7,"^/v/\\d{1,3}/\\d+/$":10,"^/v/\\d{1,3}/\\d+/[a-z]/\\d+\\.html$":11},s=13,a=e.replace(n,""),c=i[t(e)],d="";if(o(),0==c){var u,f=s;for(u in r){var g=!1,l=new RegExp(u);try{g=l.test(d)}catch(h){}g&&(f=r[u])}return f}return c||s}};t.E.extend(!0,e,r)}(t.$),function(e,t){e.BasePlayer=function(){this.config={}},e.BasePlayer.prototype={log:function(e){window.console&&window.console.log(e)}}}(t,t.$),t.defaultConfig={},t.playerConfig={url:window.location.href,bid:"isIpad"==t.$.os.sys?"4.1.2":"1.1.2",time:t.$.getTimer("yyyyMMddhhmmss"),guid:"",ch:"",sessionid:t.$.sessionid(),cookie:t.$.stkuuid(),suuid:t.$.getsUUID(),plid:"",vid:"",cid:"",uuid:t.$.cookie.get("uuid"),wuid:"",pix:t.$.getWindowWH()[0]+"X"+t.$.getWindowWH()[1],ref:document.referrer||""},t.pvConfig={url:window.location.href,bid:"isIpad"==t.$.os.sys?"4.1.2":"1.1.2",time:t.$.getTimer("yyyyMMddhhmmss"),guid:"",uuid:t.$.cookie.get("uuid"),cookie:t.$.stkuuid(),ch:"",sessionid:t.$.sessionid(),suuid:t.$.getsUUID(),pix:t.$.getWindowWH()[0]+"X"+t.$.getWindowWH()[1],ref:document.referrer||""},function(e,t){e.start=function(){this.config={},e.E.extend(!0,this.config,e.playerConfig)},e.start.fn=e.start.prototype=new e.BasePlayer,e.E.extend(!0,e.start.fn,{create:function(t,o,r){r||(r=e.playerConfig),o||(o=i);var s=e.$.cookie.get("MQGUID");if(""==s)n=t,e.$.createGUID();else{t.guid=s;var a=e.E.extend(!0,r,t),c=e.$.createPar(a),d=new Image(1,1);d.src=o+"?"+c}},pageBtn:function(e){var t=this;e=e||{},t.create(e)},pageStart:function(t){var o=this;t=t||{},e.defaultConfig=e.playerConfig,o.create(t)},pageEvent:function(t,o){var n=this;t=t||{},o=o||i,i=o,e.defaultConfig=e.pvConfig,n.create(t,o,e.pvConfig)},pagePv:function(t,o){var n=this;t=t||{},o=o||i,i=o,e.defaultConfig=e.pvConfig,n.create(t,o,e.pvConfig)}})}(t,t.$),e.STK=t}(this);